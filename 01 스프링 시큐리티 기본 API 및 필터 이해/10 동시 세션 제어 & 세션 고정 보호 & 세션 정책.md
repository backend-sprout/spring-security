동시 세션 제어 & 세션 고정 보호 & 세션 정책
============================================  
# 동시 세션 제어    
동일한 계정으로 인증을 받을 때마다 세션은 새롭게 생성이 된다.     
                
**동시 세션 제어란** 한 계정의 세션 갯수가 일정 기준치를 초과할 경우          
**세션의 갯수를 더 이상 늘리지 않고 유지하는 방법에 대한 제어를 말한다.**         

![image](https://user-images.githubusercontent.com/50267433/129349927-8741f285-6905-417d-8787-e6bb1dbc8e89.png)

(앞선, 그림에서 사용자1 사용자2는 동일한 계정이지만 가시성을 위해 분리해서 표현했다.)    
  
스프링 시큐리티에서는 2가지 전략으로 동시 세션을 제어하고 있다.    

* **이전 사용자 세션 만료 :** 첫 세션을 만료시키고 새로운 인증의 세션만을 인정해주는 방식이다.            
* **현재 사용자 인증 실패 :** 처음에 생성된 세션만을 인정해주고 나머지는 세션 생성을 불가능하게 만든다.   

## 코드 
```java
protected void configure(HttpSecurity http) throws Exception {
    http.sessionManagement()
        .maximumSessions(1)               // 최대 허용 가능 세션 수, -1: 무제한 
        .maxSessionsPreventsLogin(true)   // 동시 로그인 차단, false : 기존 세션 만료 
        .invalidSessionUrl("/invalid")    // 세션이 유효하지 않을 때 이동할 페이지 
        .expriedUrl("/expired")           // 세션이 만료된 경우 이동할 페이지
}
``` 
   
|메서드|설명|  
|-----|----|  
|sessionManagement()|세션 동시 제어에 관한 Configure를 반환한다.|     
|maximumSessions(1)|최대 허용 가능 세션 수를 정한다.<br> -1: 무제한 |    
|maxSessionsPreventsLogin(true)|동시 로그인을 차단한다.<br> (default)false: 로그인 가능하되 기존 세션 만료 한다.|     
|invalidSessionUrl("/invalid")|세션이 유효하지 않을 때 이동할 페이지를 정한다.|      
|expriedUrl("/expired")|세션이 만료되었을 때 이동할 페이지를 정한다.|      









































